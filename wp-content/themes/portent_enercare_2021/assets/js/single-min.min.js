"use strict";jQuery(function(s){function a(t){s(".multiSelect").each(function(){s(this)!==t&&(s(this).hide(),s(this).prev().attr("aria-expanded","false"))})}function i(){s(".select-container").each(function(){var t=s(this).find('.multi-dropdown-button[aria-pressed="true"]'),a=s(this).find(".taxonomy-filters__category-control");0<t.length?a.attr("data-active","true"):a.attr("data-active","false")})}function d(t){history.pushState?window.history.pushState("","",t):document.location.href=t}function c(t){console.log("updatedUrl",t),s.get(t,function(t,a,e){404===e.status?s(".archive-wrapper").fadeIn(1e3).html("<h2>No results found.</h2>"):t&&t.length&&(s(t).find(".no-results").length?s(".archive-wrapper").fadeIn(1e3).html("<h2>No results found.</h2>"):s(".archive-wrapper").fadeIn(1e3).html(s(t).find(".archive-wrapper").html()))})}s(document).on("click",function(t){s(t.target).closest(".taxonomy-filters__category-control").length||a()}),s(document).on("keyup",function(t){27===t.keyCode&&a()}),s(".filter-reset").on("click",function(){var t;t=window.location.href.split("?")[0],s('.multi-dropdown-button[aria-pressed="true"]').attr("aria-pressed","false"),i(),d(t),c(t)}),s(".taxonomy-filters__category-control").on("click",function(t){s(this).next().is(":visible")?(s(this).next().hide(),s(this).attr("aria-expanded","false")):(a(s(this).next()),s(this).next().show(),s(this).attr("aria-expanded","true"))}),s(".multi-dropdown-button").click(function(){var t=!1,a=!1;"true"===s(this).attr("aria-pressed")?(s(this).attr("aria-pressed",!1),t=!0):s(this).attr("aria-pressed",!0),i();var e=new URL(window.location.href),r=e.searchParams.get("cat"),o=[];r&&r.length?o=r.split(","):a=!0,r&&(t||r.includes(s(this).attr("data-taxonomy")))||o.push(s(this).attr("data-taxonomy"));for(var n=0;n<o.length;n++)window["terms-"+o[n]]=e.searchParams.get("terms-"+o[n]),s(this).attr("data-taxonomy")===o[n]&&(window["terms-"+o[n]]&&window["terms-"+o[n]].length?t?(window["terms-"+o[n]]=window["terms-"+o[n]].replace(","+s(this).attr("data-term"),""),window["terms-"+o[n]]=window["terms-"+o[n]].replace(s(this).attr("data-term")+",",""),window["terms-"+o[n]]=window["terms-"+o[n]].replace(s(this).attr("data-term"),"")):window["terms-"+o[n]]=window["terms-"+o[n]]+","+s(this).attr("data-term"):window["terms-"+o[n]]=s(this).attr("data-term")),""===window["terms-"+o[n]]?e.searchParams.delete("terms-"+o[n]):e.searchParams.set("terms-"+o[n],window["terms-"+o[n]]);r&&r.length?t&&0===window["terms-"+s(this).attr("data-taxonomy")].length?r=(r=(r=r.replace(","+s(this).attr("data-taxonomy"),"")).replace(s(this).attr("data-taxonomy")+",","")).replace(s(this).attr("data-taxonomy"),""):r.includes(s(this).attr("data-taxonomy"))||(r=r+","+s(this).attr("data-taxonomy")):r=s(this).attr("data-taxonomy"),""===r?e.searchParams.delete("cat"):e.searchParams.set("cat",r);r=e.href;d(r=a?e.href.replace(/\/page\/[0-9]+/,""):r),c(r)}),i(),s(".postal-code-input-container button").on("click",function(t){var a=s(".postal-code-input-container #postalCode").val();console.log(a);var e=new URL(window.location.href);e.searchParams.get("postal_code");e.searchParams.set("postal_code",a);e=e.href;d(e),c(e)})});