"use strict";jQuery(function(n){n(".menu-toggle").click(function(){}),n(".menu-item-has-children > .submenu-expand").click(function(e){n(this).toggleClass("expanded"),e.preventDefault()}),n(".search-toggle").click(function(){n(".menu-toggle, .nav-menu").removeClass("active"),n(".search-toggle, .header-search").toggleClass("active"),n(".site-header .search-field").focus()});var e=new AddSearchClient("3145819e621ccfb6dbf5116b2c92967b"),t={searchResultsPageUrl:"/",searchParameter:"addsearch",updateBrowserHistory:!1},o=new AddSearchUI(e,t);o.searchField({autofocus:!1,containerId:"searchfield",placeholder:"Search",icon:!1}),new AddSearchUI(e,t).searchField({autofocus:!1,containerId:"mobile-searchfield",placeholder:"Search",icon:!1}),o.start(),function(o,r,a){function t(e){for(var t=e+"=",n=decodeURIComponent(r.cookie).split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""}o.Enercare={},o.Enercare.PPCparams=[{utm_source:"utm_source"},{utm_medium:"utm_medium"},{utm_campaign:"utm_campaign"}],o.Enercare.getUrlParameter=function(e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),e=new RegExp("[\\?&]".concat(e,"=([^&#]*)")).exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},o.Enercare.logPPCParamsToStorage=function(){o.Enercare.PPCparams.forEach(function(e){var t=Object.keys(e)[0],e=e[t];sessionStorage[t]||(sessionStorage[t]=o.Enercare.getUrlParameter(e))})},o.Enercare.handleHiddenFormFields=function(n){var e;n.VendorCookieID===a?((e=r.createElement("input")).setAttribute("type","hidden"),e.setAttribute("name","ruid"),e.setAttribute("value",t("ruid")),n.appendChild(e)):n.VendorCookieID.setAttribute("value",t("ruid")),o.Enercare.PPCparams.forEach(function(e){var t=Object.keys(e)[0];n.key===a?((e=r.createElement("input")).setAttribute("type","hidden"),e.setAttribute("name",t),e.setAttribute("value",sessionStorage[t]),n.appendChild(e)):n.key.setAttribute("value",sessionStorage[t])})},o.Enercare.logPPCParamsToStorage();var e=n(".gform_wrapper form");e.length&&o.Enercare.handleHiddenFormFields(e[0])}(window,document)});var PortentToggleNav=function(){};function setupToggleNav(){var e=new PortentToggleNav;e.menu=document.getElementById("slider-menu"),e.toggleButton=document.getElementById("slider-menu-toggle"),e.init()}PortentToggleNav.prototype.menu="",PortentToggleNav.prototype.init=function(){""!==this.menu?(this.menu.classList.add("portent-toggle-nav"),this.setupMobileToggle(),this.setupStatusArea(),this.navigationMenuToggle(this.menu),this.setupClickOutside()):console.log("Please set a menu property")},PortentToggleNav.prototype.setupClickOutside=function(){var t=this,n=this.menu;document.addEventListener("click",function(e){n.contains(e.target)||t.closeAllMenus(n)})},PortentToggleNav.prototype.setupStatusArea=function(){var e=this,t=this.menu,n=document.createElement("div"),o=document.createElement("button"),a=document.createElement("button");n.setAttribute("aria-hidden","true"),n.setAttribute("data-interface","statusArea"),a.innerText="Close",a.classList.add("mobile-close-btn"),o.innerText="Back to main menu",o.classList.add("mobile-back-btn"),n.appendChild(o),n.appendChild(a),t.insertBefore(n,t.children[0]),o.addEventListener("click",function(){e.closeAllMenus(t)}),a.addEventListener("click",function(){e.closeMobileMenu(t)})},PortentToggleNav.prototype.setupMobileToggle=function(){var e,t=this,n=this.menu;this.toggleButton?e=this.toggleButton:(e.innerText="Menu",e=document.createElement("button"),n.parentElement.insertBefore(e,n)),e.addEventListener("click",function(){t.openMobileMenu(t.menu)}),e.setAttribute("aria-expanded","false")},PortentToggleNav.prototype.setSubMenuStatus=function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]?this.menu.setAttribute("data-menu","open"):this.menu.removeAttribute("data-menu")},PortentToggleNav.prototype.navigationMenuToggle=function(n){var e=n.querySelectorAll("[data-children=true]"),o=this;e.forEach.call(e,function(t,e){t.querySelector("button").addEventListener("click",function(e){return"true"===this.parentNode.dataset.open?(this.parentNode.dataset.open="false",this.setAttribute("aria-expanded","false"),o.setSubMenuStatus()):(o.closeAllMenus(n),this.parentNode.dataset.open="true",this.setAttribute("aria-expanded","true"),o.setSubMenuStatus(!0)),o.focusFirstOption(this.parentNode),!1}),t.querySelector("button").addEventListener("keydown",function(e){return console.log(e),40===e.keyCode&&(e.preventDefault(),console.log("Key code 40"),"true"===e.target.parentNode.dataset.open?(e.target.dataset.open="false",e.target.setAttribute("aria-expanded","false"),o.setSubMenuStatus(!1)):(o.closeAllMenus(n),e.target.parentNode.dataset.open="true",e.target.setAttribute("aria-expanded","true"),o.setSubMenuStatus(!0),o.focusFirstOption(this.parentNode))),38===e.keyCode&&(console.log("Key code 38"),o.closeAllMenus(n)),!1}),t.querySelectorAll("a").forEach(function(e){console.log("link for each"),e.addEventListener("keydown",function(e){console.log("link key press"),40!==e.keyCode&&38!==e.keyCode||(console.log("arrow press"),e.stopPropagation(),e.preventDefault(),o.findNextMenuLink(e,t))}),e.addEventListener("keyup",function(e){27===e.keyCode&&(o.closeAllMenus(n),t.querySelector("button").focus())})})})},PortentToggleNav.prototype.findNextMenuLink=function(n,e){var o=e.querySelectorAll("a"),t=o[0],e=o[o.length-1],a=document.activeElement;a!==t||38!==n.keyCode?a!==e||40!==n.keyCode?o.forEach(function(e,t){a===e&&(40===n.keyCode?o[t+1].focus():38===n.keyCode&&o[t-1].focus())}):t.focus():e.focus()},PortentToggleNav.prototype.closeAllMenus=function(e){e.querySelectorAll("button[aria-expanded=true]").forEach(function(e){e.parentNode.dataset.open="false",e.setAttribute("aria-expanded","false")}),this.setSubMenuStatus(!1)},PortentToggleNav.prototype.openMobileMenu=function(e){e.setAttribute("data-mobile","open"),this.menu.querySelector(".menu-item button").focus()},PortentToggleNav.prototype.closeMobileMenu=function(){this.closeAllMenus(this.menu),"open"===this.menu.getAttribute("data-mobile")&&this.menu.removeAttribute("data-mobile"),this.setSubMenuStatus(!1)},PortentToggleNav.prototype.focusFirstOption=function(e){console.log("focusing first option"),console.log(e);e=e.querySelector(".sub-menu a");console.log(e),e.focus({preventScroll:!0}),console.log(document.activeElement)},window.addEventListener("load",setupToggleNav),jQuery(function(n){function e(e){var t=null;try{t=n(e)}catch(e){return}(t=t.length?t:n("[name="+this.hash.slice(1)+"]")).length&&(e=0,"fixed"==n(".site-header").css("position")&&(e=n(".site-header").height()),n("body").hasClass("admin-bar")&&(e+=n("#wpadminbar").height()),n("html,body").animate({scrollTop:t.offset().top-e},1e3))}window.location.hash&&e(window.location.hash),n('a[href*="#"]:not([href="#"]):not(.no-scroll)').click(function(){location.pathname.replace(/^\//,"")!=this.pathname.replace(/^\//,"")&&location.hostname!=this.hostname||e(this.hash)})});